const translations = {
  en: {
    nav_home: 'Home',
    nav_products: 'Products',
    nav_contact: 'Contact',
    theme_toggle: 'Toggle Theme',
    language_label: 'Language',
    home_title: 'KENTACK Luxury Golf Experience',
    home_desc: 'Discover high-end golf gear for champions.',
    hero_cta: 'Shop Now',
    explore_collection: 'Explore the Collection',
    story_title: 'Message from Ken Karahawa',
    story_message: `The name Golf Honma has long symbolized top-class Japanese craftsmanship, admired by golfers worldwide. Our KENTACK brand carries forward this proud tradition and superior techniques. Founded in 2007 by Yukihiro Honma, co-founder of Honma Golf, KENTACK was created to preserve the spirit and identity of the original Honma legacy after the brand became foreign-owned.\n\nYukihiro Honma, a master craftsman, once produced the finest clubs under the name HIRO HONMA, blending performance and beauty with over 50 years of expertise. With KENTACK, he revived that genuine tradition. Though he has since stepped back, his techniques and philosophy remain at the heart of our work.\n\nToday, KENTACK continues to craft elegant, precise, and high-performing clubs through meticulous Japanese artistry. We are committed to honoring our heritage while advancing technology, delivering top-quality clubs that add value for discerning golfers worldwide.`,
    products_title: 'Our Products',
    product1_name: 'Golden Irons Set',
    product1_desc: 'Complete set of handcrafted gold-plated irons.',
    product1_price: '$1,200',
    product2_name: 'Golden Driver',
    product2_desc: 'Precision driver with gold finish.',
    product2_price: '$800',
    product3_name: 'DragonEyes Putter',
    product3_desc: 'Artisan putter with detailed engraving.',
    product3_price: '$600',
    category_clubs: 'Clubs',
    category_bags: 'Bags',
    category_balls: 'Balls',
    category_tees: 'Tees',
    category_accessories: 'Accessories',
    club_woods: 'Woods',
    club_irons: 'Irons',
    club_hybrids: 'Hybrids',
    club_wedges: 'Wedges',
    club_putters: 'Putters',
    view_4x4: '4 x 4',
    view_5x5: '5 x 5',
    no_products: 'No products available.',
    product_bag_name: 'Leather Golf Bag',
    product_bag_desc: 'Premium leather bag for style and durability.',
    product_bag_price: '$500',
    product_balls_name: 'Premium Golf Balls',
    product_balls_desc: 'Set of 12 high-performance balls.',
    product_balls_price: '$60',
    product_tees_name: 'Luxury Tees Pack',
    product_tees_desc: 'Gold-plated tees for perfect drives.',
    product_tees_price: '$40',
    product_accessory_name: 'Gold Ball Marker',
    product_accessory_desc: 'Elegant marker with Kentack logo.',
    product_accessory_price: '$25',
    contact_title: 'Contact Us',
    contact_phone: 'Phone: 0899033692',
    contact_location_title: 'Location',
    contact_location: 'Phố Tân Mỹ, Phương Quan, Nam Từ Liêm, Hà Nội, Vietnam'
  },
  vi: {
    nav_home: 'Trang chủ',
    nav_products: 'Sản phẩm',
    nav_contact: 'Liên hệ',
    theme_toggle: 'Đổi chủ đề',
    language_label: 'Ngôn ngữ',
    home_title: 'KENTACK - Trải nghiệm Golf Sang Trọng',
    home_desc: 'Khám phá thiết bị golf cao cấp dành cho nhà vô địch.',
    hero_cta: 'Mua Ngay',
    explore_collection: 'Khám phá Bộ Sưu Tập',
    story_title: 'Thông điệp từ Ken Karahawa',
    story_message: `Tên Golf Honma từ lâu đã tượng trưng cho tay nghề Nhật Bản đẳng cấp, được các golfer trên toàn thế giới ngưỡng mộ. Thương hiệu KENTACK của chúng tôi tiếp nối truyền thống đáng tự hào và kỹ thuật ưu việt đó. Được thành lập năm 2007 bởi ông Yukihiro Honma, đồng sáng lập Honma Golf, KENTACK ra đời để gìn giữ tinh thần và bản sắc di sản Honma nguyên bản sau khi thương hiệu trở thành sở hữu nước ngoài.\n\nYukihiro Honma, một bậc thầy chế tác, từng tạo ra những cây gậy hoàn hảo nhất dưới tên HIRO HONMA, kết hợp hiệu suất và vẻ đẹp với hơn 50 năm kinh nghiệm. Với KENTACK, ông đã hồi sinh truyền thống chân chính đó. Dù nay ông đã lui về, kỹ thuật và triết lý của ông vẫn là cốt lõi trong công việc của chúng tôi.\n\nNgày nay, KENTACK tiếp tục chế tác những cây gậy thanh lịch, chính xác và hiệu suất cao bằng nghệ thuật Nhật Bản tỉ mỉ. Chúng tôi cam kết tôn vinh di sản đồng thời phát triển công nghệ, mang đến những cây gậy chất lượng hàng đầu tạo giá trị cho các golfer sành điệu trên toàn thế giới.`,
    products_title: 'Sản phẩm của chúng tôi',
    product1_name: 'Bộ Gậy Sắt Mạ Vàng',
    product1_desc: 'Bộ gậy sắt mạ vàng chế tác thủ công hoàn hảo.',
    product1_price: '1.200 USD',
    product2_name: 'Gậy Driver Mạ Vàng',
    product2_desc: 'Driver chính xác với lớp phủ vàng.',
    product2_price: '800 USD',
    product3_name: 'Gậy Putter DragonEyes',
    product3_desc: 'Gậy putter thủ công với chạm khắc tinh xảo.',
    product3_price: '600 USD',
    category_clubs: 'Gậy',
    category_bags: 'Túi',
    category_balls: 'Bóng',
    category_tees: 'Tee',
    category_accessories: 'Phụ kiện',
    club_woods: 'Gậy gỗ',
    club_irons: 'Gậy sắt',
    club_hybrids: 'Gậy hybrid',
    club_wedges: 'Gậy wedge',
    club_putters: 'Gậy putter',
    view_4x4: '4 x 4',
    view_5x5: '5 x 5',
    no_products: 'Không có sản phẩm.',
    product_bag_name: 'Túi Golf Da',
    product_bag_desc: 'Túi da cao cấp bền bỉ và phong cách.',
    product_bag_price: '500 USD',
    product_balls_name: 'Bóng Golf Cao Cấp',
    product_balls_desc: 'Bộ 12 bóng hiệu suất cao.',
    product_balls_price: '60 USD',
    product_tees_name: 'Bộ Tee Sang Trọng',
    product_tees_desc: 'Tee mạ vàng cho cú đánh hoàn hảo.',
    product_tees_price: '40 USD',
    product_accessory_name: 'Dấu Bóng Vàng',
    product_accessory_desc: 'Dấu bóng thanh lịch với logo Kentack.',
    product_accessory_price: '25 USD',
    contact_title: 'Liên hệ với chúng tôi',
    contact_phone: 'Điện thoại: 0899033692',
    contact_location_title: 'Địa chỉ',
    contact_location: 'Phố Tân Mỹ, Phương Quan, Nam Từ Liêm, Hà Nội, Vietnam'
  },
  ja: {
    nav_home: 'ホーム',
    nav_products: '製品',
    nav_contact: 'お問い合わせ',
    theme_toggle: 'テーマ切替',
    language_label: '言語',
    home_title: 'KENTACK ラグジュアリーなゴルフ体験',
    home_desc: 'チャンピオンのための高級ゴルフ用品を見つけましょう。',
    hero_cta: '今すぐ購入',
    explore_collection: 'コレクションを探る',
    story_title: '唐川ケンからのメッセージ',
    story_message: `「ゴルフ本間」という名前は、長年にわたり日本最高峰の職人技の象徴として、世界中のゴルファーに愛されてきました。私たちのKENTACKブランドは、この誇り高い伝統と優れた技術を受け継いでいます。KENTACKは本間ゴルフの共同創業者、本間幸宏によって2007年に設立され、ブランドが外国資本となった後も本来の本間の精神とアイデンティティを守るために生まれました。\n\n名匠である本間幸宏は、かつてHIRO HONMAの名で最高級のクラブを作り上げ、50年以上の経験で性能と美を融合させました。KENTACKによって彼はその真の伝統を復活させました。現在は第一線を退いていますが、彼の技術と理念は今も私たちの中心にあります。\n\n今日のKENTACKは、緻密な日本の職人技でエレガントで精密、そして高性能なクラブを作り続けています。私たちは遺産を尊重しつつ技術を進化させ、世界中の目の肥えたゴルファーに価値ある最高品質のクラブを提供し続けます。`,
    products_title: '製品一覧',
    product1_name: 'ゴールドアイアンセット',
    product1_desc: '手作りの金メッキアイアンセット。',
    product1_price: '1,200ドル',
    product2_name: 'ゴールドドライバー',
    product2_desc: 'ゴールド仕上げの精密ドライバー。',
    product2_price: '800ドル',
    product3_name: 'ドラゴンアイズパター',
    product3_desc: '精巧な彫刻入りのパター。',
    product3_price: '600ドル',
    category_clubs: 'クラブ',
    category_bags: 'バッグ',
    category_balls: 'ボール',
    category_tees: 'ティー',
    category_accessories: 'アクセサリー',
    club_woods: 'ウッド',
    club_irons: 'アイアン',
    club_hybrids: 'ハイブリッド',
    club_wedges: 'ウェッジ',
    club_putters: 'パター',
    view_4x4: '4 x 4',
    view_5x5: '5 x 5',
    no_products: '商品がありません。',
    product_bag_name: 'レザーゴルフバッグ',
    product_bag_desc: 'スタイルと耐久性を兼ね備えた高級レザーバッグ。',
    product_bag_price: '500ドル',
    product_balls_name: 'プレミアムゴルフボール',
    product_balls_desc: '高性能ボール12個セット。',
    product_balls_price: '60ドル',
    product_tees_name: 'ラグジュアリーティーセット',
    product_tees_desc: '完璧なショットのための金メッキティー。',
    product_tees_price: '40ドル',
    product_accessory_name: 'ゴールドボールマーカー',
    product_accessory_desc: 'Kentackロゴ入りのエレガントなマーカー。',
    product_accessory_price: '25ドル',
    contact_title: 'お問い合わせ',
    contact_phone: '電話: 0899033692',
    contact_location_title: '住所',
    contact_location: 'Phố Tân Mỹ, Phương Quan, Nam Từ Liêm, Hà Nội, Vietnam'
  }
};

function setLanguage(lang) {
  localStorage.setItem('lang', lang);
  document.documentElement.lang = lang;
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });
}

function initLanguage() {
  const saved = localStorage.getItem('lang') || 'en';
  const select = document.getElementById('language-select');
  const toggle = document.getElementById('language-toggle');
  if (select) {
    select.value = saved;
    select.addEventListener('change', e => {
      setLanguage(e.target.value);
      select.classList.add('hidden');
    });
  }
  if (toggle && select) {
    toggle.addEventListener('click', () => {
      select.classList.toggle('hidden');
    });
  }
  setLanguage(saved);
}

function initTheme() {
  const saved = localStorage.getItem('theme');
  if (saved === 'dark') {
    document.body.classList.add('dark-theme');
  }
  const toggle = document.getElementById('theme-toggle');
  if (toggle) {
    const updateIcon = () => {
      toggle.textContent = document.body.classList.contains('dark-theme') ? '☀️' : '🌙';
    };
    updateIcon();
    toggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-theme');
      localStorage.setItem('theme', document.body.classList.contains('dark-theme') ? 'dark' : 'light');
      updateIcon();
    });
  }
}

function initAnimations() {
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('show');
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.animate').forEach(el => observer.observe(el));
}

function initCarousel() {
  const images = Array.from(document.querySelectorAll('.image-item img'));
  if (!images.length) return;
  const imageSets = [
    ['images/carousel1.jpg', 'images/carousel2.jpg', 'images/carousel3.jpg'],
    ['images/carousel4.jpg', 'images/carousel5.jpg', 'images/carousel1.jpg']
  ];

  let index = 0;

  function showSet(i) {
    images.forEach((img, idx) => {
      img.src = imageSets[i][idx];
    });
    if (images[1]) {
      if (images[1].complete) {
        updateOverlayColor();
      } else {
        images[1].addEventListener('load', updateOverlayColor, { once: true });
      }
    }
  }

  showSet(index);

  setInterval(() => {
    images.forEach(img => img.classList.add('fade'));
    setTimeout(() => {
      index = (index + 1) % imageSets.length;
      showSet(index);
      images.forEach(img => img.classList.remove('fade'));
    }, 1000);
  }, 5000);
}

function updateOverlayColor() {
  document.documentElement.style.setProperty('--overlay-color', '#000000');
}

function initNavScroll() {
  const nav = document.querySelector('nav');
  if (!nav) return;
  const navHeight = nav.offsetHeight;
  let lastScroll = window.pageYOffset;
  window.addEventListener('scroll', () => {
    const current = window.pageYOffset;
    if (current > lastScroll) {
      nav.style.top = `-${navHeight}px`;
    } else {
      nav.style.top = '0';
    }
    lastScroll = current;
  });
}

function initDeviceDetection() {
  const body = document.body;
  function updateDevice() {
    const width = window.innerWidth;
    body.classList.remove('device-phone', 'device-tablet', 'device-desktop');
    if (width <= 600) {
      body.classList.add('device-phone');
    } else if (width <= 992) {
      body.classList.add('device-tablet');
    } else {
      body.classList.add('device-desktop');
    }
  }
  updateDevice();
  window.addEventListener('resize', updateDevice);
}

const productData = [];

function renderProducts(filter = {}) {
  const grid = document.getElementById('product-grid');
  if (!grid) return;
  grid.innerHTML = '';
  const lang = document.documentElement.lang || 'en';
  const items = productData.filter(p => {
    if (filter.category && p.category !== filter.category) return false;
    if (filter.type && p.type !== filter.type) return false;
    return true;
  });
  if (!items.length) {
    const msg = document.createElement('p');
    msg.setAttribute('data-i18n', 'no_products');
    msg.textContent = translations[lang].no_products;
    grid.appendChild(msg);
    return;
  }
  items.forEach(p => {
    const div = document.createElement('div');
    div.className = 'product animate';
    div.innerHTML = `
      <img src="${p.image}" alt="" class="product-image" loading="lazy">
      <h2 data-i18n="${p.nameKey}">${translations[lang][p.nameKey]}</h2>
      <p data-i18n="${p.descKey}">${translations[lang][p.descKey]}</p>
      <p class="price" data-i18n="${p.priceKey}">${translations[lang][p.priceKey]}</p>
    `;
    grid.appendChild(div);
  });
  initAnimations();
}

function initProducts() {
  const grid = document.getElementById('product-grid');
  if (!grid) return;
  renderProducts();

  const clubDropdown = document.getElementById('club-dropdown');
  const clubsBtn = document.querySelector('.category-btn[data-category="clubs"]');
  if (clubDropdown && clubsBtn) {
    clubsBtn.addEventListener('click', () => {
      clubDropdown.classList.toggle('hidden');
    });
  }

  document.querySelectorAll('.category-btn').forEach(btn => {
    const category = btn.dataset.category;
    if (category !== 'clubs') {
      btn.addEventListener('click', () => {
        renderProducts({ category });
        if (clubDropdown) {
          clubDropdown.classList.add('hidden');
        }
      });
    }
  });

  document.querySelectorAll('.club-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const type = btn.dataset.type;
      renderProducts({ category: 'clubs', type });
      if (clubDropdown) {
        clubDropdown.classList.add('hidden');
      }
    });
  });

  const viewSelect = document.getElementById('view-select');
  if (viewSelect) {
    viewSelect.addEventListener('change', e => {
      grid.classList.remove('grid-4', 'grid-5');
      grid.classList.add(`grid-${e.target.value}`);
    });
  }
}

document.addEventListener('DOMContentLoaded', () => {
  initLanguage();
  initTheme();
  initAnimations();
  initCarousel();
  initNavScroll();
  initDeviceDetection();
  initProducts();
});
