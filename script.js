const translations = {
  en: {
    nav_home: 'Home',
    nav_products: 'Products',
    nav_contact: 'Contact',
    theme_toggle: 'Toggle Theme',
    language_label: 'Language',
    home_title: 'Kentack Luxury Golf Experience',
    home_desc: 'Discover high-end golf gear for champions.',
    hero_cta: 'Discover the Collection',
    story_title: 'Message from Ken Karahawa',
    story_message: `Do you know the name "Golf Honma"? From long ago, this has been the aspirational name of many golfers, a top-class "Made in Japan" golf club brand, widely supported not only in Japan but worldwide. Our KENTACK brand inherits the proud tradition and superior techniques that Golf Honma has preserved to this day. The current KENTACK Golf Company is built on the foundations of the Honma Golf Company. Honma Golf was originally founded by the Honma brothers, Yukihiro and Hiroo. After leaving the hands of these founders, it became a foreign-invested company. Founder Yukihiro Honma worried the brand identity he had worked so hard to build would be lost, so in 2007 he established KENTACK Golf to protect the Honma spirit and preserve its traditions and craftsmanship. During the golden era of golf clubs, Yukihiro Honma was a genius who created the highest-grade clubs of the time, naming his top-class clubs "HIRO HONMA". Like an artisan, he drew on 50 years of experience and craftsmanship, pursuing the harmony of performance and beauty, and re-launched the genuine Honma brand as KENTACK. After nearly ten years he no longer leads the company, but the traditions and techniques he left remain alive in KENTACK. Our clubs offer easier, more accurate, longer shots, with refined elegance and artistic design, made possible by meticulous Japanese craftsmanship. We promise to continue providing the highest-quality, top-class golf clubs, adding value for discerning customers, demonstrating that KENTACK deserves to preserve these features while never resting on the past and continuously advancing our technology.`,
    products_title: 'Our Products',
    product1_name: 'Golden Irons Set',
    product1_desc: 'Complete set of handcrafted gold-plated irons.',
    product1_price: '$1,200',
    product2_name: 'Golden Driver',
    product2_desc: 'Precision driver with gold finish.',
    product2_price: '$800',
    product3_name: 'DragonEyes Putter',
    product3_desc: 'Artisan putter with detailed engraving.',
    product3_price: '$600',
    contact_title: 'Contact Us',
    contact_phone: 'Phone: 0899033692',
    contact_location_title: 'Location',
    contact_location: 'Phố Tân Mỹ, Phương Quan, Nam Từ Liêm, Hà Nội, Vietnam'
  },
  vi: {
    nav_home: 'Trang chủ',
    nav_products: 'Sản phẩm',
    nav_contact: 'Liên hệ',
    theme_toggle: 'Đổi chủ đề',
    language_label: 'Ngôn ngữ',
    home_title: 'Kentack - Trải nghiệm Golf Sang Trọng',
    home_desc: 'Khám phá thiết bị golf cao cấp dành cho nhà vô địch.',
    hero_cta: 'Khám phá bộ sưu tập',
    story_title: 'Thông điệp từ Ken Karahawa',
    story_message: `Quý vị có biết tên gọi “Golf Honma” không ? Từ xưa, đây là cái tên ao ước của rất nhiều người chơi Golf, là thương hiệu gậy Golf Made in Japan đẳng cấp hàng đầu, đã được sự ủng hộ lớn không chỉ trong nội địa nước Nhật mà ở cả thị trường toàn cầu. Thương hiệu KENTACK của công ty chúng tôi là thương hiệu được kế thừa truyền thống và kỹ thuật ưu việt có thể tự hào với cả thế giới mà công ty Golf Honma này đã gìn giữ được đến ngày nay. Công ty Golf KENTACK hiện tại được xây dựng trên nền tảng của Công ty Golf Honma. Công ty Golf Honma trước kia được sáng lập bởi hai anh em nhà Honma là Yukihiro Honma và Hiroo Honma, sau đó rời khỏi tay hai nhà sáng lập này, hiện nay trở thành công ty có vốn đầu tư nước ngoài. Do đó, nhà sáng lập Yukihiro Honma đã từng lo lắng công ty sẽ bị đánh mất dấu ấn thương hiệu do ông ra sức tạo dựng từ trước đến nay, nên đã thành lập công ty Golf KENTACK vào năm 2007, nhằm bảo vệ tinh thần Honma, gìn giữ phát huy những truyền thống và kỹ thuật trước đây. Trong toàn bộ thời hoàng kim của gậy Golf , Ông Yukihiro Honma là thiên tài khi tạo ra loại gậy Golf với thương hiệu cao cấp nhất thời bấy giờ, lấy chính tên mình làm thành gậy Golf đẳng cấp hàng đầu “HIRO HONMA”. Như là một nghệ nhân, ông đã vận dụng 50 năm kinh nghiệm và kỹ thuật làm gậy Golf, với phương châm là sự dung hòa giữa tính năng và cái đẹp, ông đã tái xuất phát với thương hiệu KENTACK, như là thương hiệu Honma chân chính được hồi sinh mới. Sau đó, trải qua gần 10 năm, Ông Yukihiro Honma đã không còn điều hành công ty, nhưng truyền thống và kỹ thuật do ông để lại đến nay vẫn được lưu giữ trong thương hiệu KENTACK. Với tính năng gậy Golf giúp đánh bóng “dễ đánh hơn”, “chính xác hơn”, “bay xa hơn”, có vẻ đẹp tinh tế, mẫu mã đẹp như một tác phẩm nghệ thuật. Điều này được thành hiện thực chính nhờ có bàn tay nghệ nhân Nhật chăm chút tỉ mĩ tạo nên. Chúng tôi xin hứa sẽ tiếp tục cung cấp gậy Golf với chất lượng cao, đẳng cấp nhất, tạo ra những giá trị cao thêm cho khách hàng yêu cầu cao, bằng việc thể hiện rằng KENTACK là truyền thống đáng được gìn giữ nguyên vẹn các tính năng như thế, nhưng không tự mãn với bề dày truyền thống ngày xưa mà không ngừng tích lũy nâng cao tính năng kỹ thuật mỗi ngày.`,
    products_title: 'Sản phẩm của chúng tôi',
    product1_name: 'Bộ Gậy Sắt Mạ Vàng',
    product1_desc: 'Bộ gậy sắt mạ vàng chế tác thủ công hoàn hảo.',
    product1_price: '1.200 USD',
    product2_name: 'Gậy Driver Mạ Vàng',
    product2_desc: 'Driver chính xác với lớp phủ vàng.',
    product2_price: '800 USD',
    product3_name: 'Gậy Putter DragonEyes',
    product3_desc: 'Gậy putter thủ công với chạm khắc tinh xảo.',
    product3_price: '600 USD',
    contact_title: 'Liên hệ với chúng tôi',
    contact_phone: 'Điện thoại: 0899033692',
    contact_location_title: 'Địa chỉ',
    contact_location: 'Phố Tân Mỹ, Phương Quan, Nam Từ Liêm, Hà Nội, Vietnam'
  },
  ja: {
    nav_home: 'ホーム',
    nav_products: '製品',
    nav_contact: 'お問い合わせ',
    theme_toggle: 'テーマ切替',
    language_label: '言語',
    home_title: 'Kentack ラグジュアリーなゴルフ体験',
    home_desc: 'チャンピオンのための高級ゴルフ用品を見つけましょう。',
    hero_cta: 'コレクションを見る',
    story_title: '唐川ケンからのメッセージ',
    story_message: `「ゴルフ本間」という名前をご存じでしょうか。昔から多くのゴルファーが憧れるこの名前は、日本国内だけでなく世界の市場でも大きな支持を得てきた、最高級のメイド・イン・ジャパンのゴルフクラブブランドです。私たちのKENTACKブランドは、この本間ゴルフが今日まで守り続けてきた伝統と優れた技術を受け継いでいます。現在のKENTACKゴルフは本間ゴルフを基盤として築かれました。本間ゴルフはもともと本間幸宏と本間洋夫の兄弟によって設立され、その後彼らの手を離れて外国資本の会社となりました。そのため創業者の本間幸宏は、自らが築き上げたブランドの証が失われることを危惧し、2007年にKENTACKゴルフを設立して本間の精神を守り、伝統と技術を継承することにしました。ゴルフクラブの黄金期において、本間幸宏は当時最高級のクラブブランド『HIRO HONMA』を生み出した天才でした。職人として彼は50年の経験と技術を活かし、性能と美の調和を理念として、真の本間ブランドを新たに蘇らせるKENTACKを再出発させました。その後約10年が経ち、本間幸宏は経営から退きましたが、彼の残した伝統と技術は今もKENTACKの中に生きています。私たちのクラブは『より打ちやすく』『より正確に』『より遠くへ』ボールを飛ばし、芸術作品のような洗練された美しさを備えています。これは日本の職人の細やかな手仕事によって実現しました。私たちは過去の伝統に満足することなく、日々技術を高めながら、KENTACKがこれらの特徴を守り続ける価値あるブランドであることを示し、最高品質・最高級のゴルフクラブをこだわりのあるお客様に提供し続けることをお約束します。`,
    products_title: '製品一覧',
    product1_name: 'ゴールドアイアンセット',
    product1_desc: '手作りの金メッキアイアンセット。',
    product1_price: '1,200ドル',
    product2_name: 'ゴールドドライバー',
    product2_desc: 'ゴールド仕上げの精密ドライバー。',
    product2_price: '800ドル',
    product3_name: 'ドラゴンアイズパター',
    product3_desc: '精巧な彫刻入りのパター。',
    product3_price: '600ドル',
    contact_title: 'お問い合わせ',
    contact_phone: '電話: 0899033692',
    contact_location_title: '住所',
    contact_location: 'Phố Tân Mỹ, Phương Quan, Nam Từ Liêm, Hà Nội, Vietnam'
  }
};

function setLanguage(lang) {
  localStorage.setItem('lang', lang);
  document.documentElement.lang = lang;
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });
}

function initLanguage() {
  const saved = localStorage.getItem('lang') || 'en';
  const select = document.getElementById('language-select');
  if (select) {
    select.value = saved;
    select.addEventListener('change', e => setLanguage(e.target.value));
  }
  setLanguage(saved);
}

function initTheme() {
  const saved = localStorage.getItem('theme');
  if (saved === 'dark') {
    document.body.classList.add('dark-theme');
  }
  const toggle = document.getElementById('theme-toggle');
  if (toggle) {
    toggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-theme');
      localStorage.setItem('theme', document.body.classList.contains('dark-theme') ? 'dark' : 'light');
    });
  }
}

function initAnimations() {
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('show');
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.animate').forEach(el => observer.observe(el));
}

function initCarousel() {
  const images = Array.from(document.querySelectorAll('.image-item img'));
  if (!images.length) return;
  const imageSets = [
    ['NEWIMAGES/378eab1265ecedb2b4fd10.jpg', 'NEWIMAGES/46776ce8a2162a48730711.jpg', 'NEWIMAGES/51ee9f72518cd9d2809d5.jpg'],
    ['NEWIMAGES/572ccab0044e8c10d55f4.jpg', 'NEWIMAGES/6d11358dfb73732d2a627.jpg', 'NEWIMAGES/7402229eec60643e3d711.jpg'],
    ['NEWIMAGES/76da7245bcbb34e56daa12.jpg', 'NEWIMAGES/c83f18a3d65d5e03074c2.jpg', 'NEWIMAGES/c976cce902178a49d3068.jpg'],
    ['NEWIMAGES/c9791fe5d11b5945000a9.jpg', 'NEWIMAGES/ce2859b4974a1f14465b6.jpg', 'NEWIMAGES/f03bc0a40e5a8604df4b13.jpg']
  ];

  let index = 0;

  function showSet(i) {
    images.forEach((img, idx) => {
      img.src = imageSets[i][idx];
    });
    if (images[1]) {
      if (images[1].complete) {
        updateOverlayColor();
      } else {
        images[1].addEventListener('load', updateOverlayColor, { once: true });
      }
    }
  }

  showSet(index);

  setInterval(() => {
    images.forEach(img => img.classList.add('fade'));
    setTimeout(() => {
      index = (index + 1) % imageSets.length;
      showSet(index);
      images.forEach(img => img.classList.remove('fade'));
    }, 1000);
  }, 5000);
}

function updateOverlayColor() {
  const img = document.querySelector('.center-item img');
  if (!img) return;
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');
  canvas.width = img.naturalWidth;
  canvas.height = img.naturalHeight;
  ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
  const data = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
  let r = 0, g = 0, b = 0;
  const total = data.length / 4;
  for (let i = 0; i < data.length; i += 4) {
    r += data[i];
    g += data[i + 1];
    b += data[i + 2];
  }
  r /= total; g /= total; b /= total;
  const luminance = 0.2126 * r + 0.7152 * g + 0.0722 * b;
  const color = luminance > 128 ? '#000000' : '#ffffff';
  document.documentElement.style.setProperty('--overlay-color', color);
}

function initNavScroll() {
  const nav = document.querySelector('nav');
  if (!nav) return;
  const navHeight = nav.offsetHeight;
  let lastScroll = window.pageYOffset;
  window.addEventListener('scroll', () => {
    const current = window.pageYOffset;
    if (current > lastScroll) {
      nav.style.top = `-${navHeight}px`;
    } else {
      nav.style.top = '0';
    }
    lastScroll = current;
  });
}

document.addEventListener('DOMContentLoaded', () => {
  initLanguage();
  initTheme();
  initAnimations();
  initCarousel();
  initNavScroll();
});
